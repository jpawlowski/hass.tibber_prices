#!/bin/sh

# script/lint-check: Check linting without making changes.

set -e

cd "$(dirname "$0")/.."

if [ -z "$VIRTUAL_ENV" ]; then
    . "$HOME/.venv/bin/activate"
fi

echo "==> Checking code format..."
uv run --active ruff format . --check

echo "==> Checking code with Ruff..."
uv run --active ruff check .

# Uninstall editable package to avoid conflicts with Home Assistant
pip uninstall -y tibber_prices >/dev/null 2>&1 || true

echo "==> Linting check completed!"
